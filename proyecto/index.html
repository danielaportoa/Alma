<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alma | Cremas naturales.</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- FontAwesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Cormorant Garamond (Serif) y Lato (Sans) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- CSS Personalizado -->
    <link rel="stylesheet" href="./assets/css/custom.css">
</head>
<body>

    <!-- 1. ENCABEZADO (HEADER) -->
    <nav class="navbar navbar-expand-lg fixed-top" id="main-nav">
        <div class="container">
            <!-- Izquierda: Logo -->
            <a class="navbar-brand" href="#inicio"><img class="navbar-brand-img" src="./assets/img/logo_alma.png" alt="logo alma"></a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Centro: Menú -->
            <div class="collapse navbar-collapse justify-content-center" id="navbarContent">
                <ul class="navbar-nav mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" href="#inicio">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="#productos">Rostro</a></li>
                    <li class="nav-item"><a class="nav-link" href="#productos">Cuerpo</a></li>
                    <li class="nav-item"><a class="nav-link" href="#envios">Envíos</a></li>
                    <li class="nav-item"><a class="nav-link" href="#promociones">Promociones</a></li>
                </ul>
            </div>

            <!-- Derecha: Iconos -->
            <div class="d-flex align-items-center gap-3">
                <!-- Botón Búsqueda (Actualizado) -->
                <button class="icon-trigger" id="search-btn" title="Buscar productos">
                    <i class="fas fa-search fa-lg"></i>
                </button>
                
                <!-- Botón Carrito -->
                <button class="icon-trigger position-relative" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas" aria-controls="cartOffcanvas" title="Ver carrito">
                    <i class="fas fa-shopping-bag fa-lg"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-cart" id="cart-counter">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- COMPONENTE OVERLAY DE BÚSQUEDA -->
    <div id="search-overlay">
        <button class="close-search" id="close-search-btn">&times;</button>
        <div class="search-container">
            <h3 class="mb-4" style="font-family: var(--font-titulo);">¿Qué estás buscando?</h3>
            <input type="text" class="search-input" id="search-input" placeholder="Crema, Serum, Exfoliante...">
            <p class="mt-3 text-muted small">Presiona ESC para cerrar</p>
        </div>
    </div>

    <!-- 2. SECCIÓN PRINCIPAL (HERO) -->
    <header class="hero-section" id="inicio">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <span class="hero-subtitle span-margen-top">Cosmética Natural </span>
                    <h1 class="hero-title">Conexión con la<br><span class="text-terracota fst-italic">naturaleza</span><br>en tu piel</h1>
                    <p class="lead mb-4">Descubre el poder de los ingredientes botánicos puros. Productos artesanales que nutren tu piel y respetan el planeta.</p>
                    <div class="d-flex gap-3">
                        <a href="#productos" class="btn-alma-primary">Descubrir la Colección</a>
                        <a href="#promociones" class="btn-alma-outline">Conocer Más</a>
                    </div>
                </div>
                <div class="col-lg-6 hero-image-container text-center">
                    <!-- IMAGEN HERO -->
                    <img src="https://images.unsplash.com/photo-1556228578-0d85b1a4d571?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                         alt="Cosmética Natural" 
                         class="img-fluid w-75"
                         onerror="this.src='https://placehold.co/800x600?text=Cosmetica+Natural'">
                </div>
            </div>
        </div>
    </header>

    <!-- 3. PRODUCTOS DESTACADOS -->
    <section id="productos" class="py-5 section-spy">
        <div class="container">
            <div class="section-title">
                <span class="section-subtitle">Nuestra Selección</span>
                <h2>Productos Destacados</h2>
                <p class="text-muted">Formulados con ingredientes 100% naturales y procesos artesanales.</p>
            </div>

            <div class="row g-4" id="products-grid">
                <!-- Producto 1: Crema Noche -->
                <div class="col-md-4 product-col" data-title="crema hidratante noche rostro">
                    <article class="product-card">
                        <div class="product-image-wrapper">
                            <span class="category-tag">Rostro</span>
                            <img src="https://images.unsplash.com/photo-1611930022073-b7a4ba5fcccd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                                 alt="Crema Noche"
                                 onerror="this.src='https://placehold.co/600x600?text=Crema+Noche'">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Crema Hidratante Noche</h5>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <span class="price">$24.990</span>
                                <button class="btn btn-sm btn-alma-primary add-to-cart" 
                                    data-id="1" 
                                    data-name="Crema Hidratante Noche" 
                                    data-price="24990"
                                    data-img="https://images.unsplash.com/photo-1611930022073-b7a4ba5fcccd?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80">
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </article>
                </div>

                <!-- Producto 2: Serum -->
                <div class="col-md-4 product-col" data-title="serum vitamina c rostro">
                    <article class="product-card">
                        <div class="product-image-wrapper">
                            <span class="category-tag">Rostro</span>
                            <img src="https://images.unsplash.com/photo-1601049541289-9b1b7bbbfe19?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                                 alt="Serum Vitamina C"
                                 onerror="this.src='https://placehold.co/600x600?text=Serum+VitC'">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Sérum Vitamina C</h5>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <span class="price">$32.990</span>
                                <button class="btn btn-sm btn-alma-primary add-to-cart"
                                    data-id="2" 
                                    data-name="Sérum Vitamina C" 
                                    data-price="32990"
                                    data-img="https://images.unsplash.com/photo-1601049541289-9b1b7bbbfe19?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80">
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </article>
                </div>

                <!-- Producto 3: Exfoliante -->
                 <!-- se agregan imagenes a carpeta assets/img -->
                <div class="col-md-4 product-col" data-title="exfoliante corporal cuerpo">
                    <article class="product-card">
                        <div class="product-image-wrapper">
                            <span class="category-tag">Cuerpo</span>
                            <img src="./assets/img/crema-sachet-grande.avif" 
                                 alt="Exfoliante Corporal"
                                 onerror="this.src='https://placehold.co/600x600?text=Exfoliante'">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Exfoliante Corporal</h5>
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <span class="price">$18.990</span>
                                <button class="btn btn-sm btn-alma-primary add-to-cart"
                                    data-id="3" 
                                    data-name="Exfoliante Corporal" 
                                    data-price="18990"
                                    data-img="./assets/img/crema-sachet.avif">
                                    Agregar
                                </button>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
            
            <!-- Mensaje Sin Resultados -->
            <div id="no-results" class="text-center mt-5 d-none">
                <i class="fas fa-search fa-3x text-muted mb-3" style="opacity: 0.3;"></i>
                <h4 class="text-muted">No encontramos productos con ese nombre.</h4>
                <button class="btn btn-alma-outline mt-3" id="clear-search">Ver todos los productos</button>
            </div>

            <div class="text-center mt-5">
                <a href="#" class="btn-alma-outline">Ver Todos los Productos</a>
            </div>
        </div>
    </section>

    <!-- 4. SECCIÓN ENVÍOS -->
    <section id="envios" class="shipping-section section-spy">
        <div class="container">
            <div class="section-title text-center mb-5">
                <span class="section-subtitle">Despacho Nacional</span>
                <h2>Envíos a Regiones</h2>
                <p>Llevamos la naturaleza a tu puerta sin importar donde estés en Chile.</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-6 col-lg-3">
                    <div class="shipping-card">
                        <div class="shipping-icon"><i class="fas fa-truck"></i></div>
                        <h5>Envío a Todo Chile</h5>
                        <p class="small text-muted">Llegamos a todas las regiones con seguimiento real.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="shipping-card">
                        <div class="shipping-icon"><i class="fas fa-store"></i></div>
                        <h5>Retiro en Tienda</h5>
                        <p class="small text-muted">Retira gratis en nuestros puntos de venta.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="shipping-card">
                        <div class="shipping-icon"><i class="fas fa-clock"></i></div>
                        <h5>Entrega Rápida</h5>
                        <p class="small text-muted">24-48 hrs en RM, 3-5 días en regiones.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="shipping-card">
                        <div class="shipping-icon"><i class="fas fa-shield-alt"></i></div>
                        <h5>Envío Seguro</h5>
                        <p class="small text-muted">Todos nuestros productos viajan protegidos.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. PROMOCIONES -->
    <section id="promociones" class="py-5 section-spy">
        <div class="container">
            <div class="section-title text-center mb-5">
                <h2>Promociones</h2>
                <p>Aprovecha nuestras ofertas exclusivas y cuida tu piel ahorrando.</p>
            </div>

            <div class="row g-4">
                <div class="col-md-6">
                    <div class="promo-card">
                        <span class="text-muted small">Nuevos Clientes</span>
                        <div class="promo-icon"><i class="fas fa-percent"></i></div>
                        <h3>20% de Descuento</h3>
                        <p>En tu primera compra con el código <strong>BIENVENIDA20</strong></p>
                        <a href="#" class="btn-alma-outline btn-sm">Ver Detalles</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="promo-card">
                        <span class="text-muted small">Por Tiempo Limitado</span>
                        <div class="promo-icon"><i class="fas fa-gift"></i></div>
                        <h3>Kit de Regalo</h3>
                        <p>Llévate un mini sérum gratis en compras sobre $40.000</p>
                        <a href="#" class="btn-alma-outline btn-sm">Ver Detalles</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="promo-card">
                        <span class="text-muted small">Solo Este Mes</span>
                        <div class="promo-icon"><i class="fas fa-star"></i></div>
                        <h3>2x1 en Mascarillas</h3>
                        <p>Todas las mascarillas faciales con promoción especial</p>
                        <a href="#" class="btn-alma-outline btn-sm">Ver Detalles</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="promo-card bg-terracota text-white" style="border:none;">
                        <span class="small" style="color: #f0e6dc;">Programa de Fidelidad</span>
                        <div class="promo-icon text-white"><i class="fas fa-heart"></i></div>
                        <h3>Club El Alma</h3>
                        <p>Únete y acumula puntos canjeables por productos exclusivos.</p>
                        <a href="#" class="btn btn-outline-light btn-sm" style="border-radius: 30px;">Unirme Ahora</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. PIE DE PÁGINA (FOOTER) -->
    <footer>
        <div class="container">
             <!-- Se aplica css custom para solucionar alinclear
              giteacion de imagen y textos (col-base)-->
            <div class="row gy-4 col-base">
                <!-- Columna 1: Marca y Newsletter -->
                <div class="col-lg-4">
                     <img
                        src="./assets/img/alma_logo_full.png"
                        class="img-fluid w-50 mb-3"
                        alt="logo full"
                    />
                    <p class="small text-white-50 mb-4">Cosmética natural de lujo que conecta tu piel con la naturaleza. Productos artesanales elaborados en Chile.</p>
                   
                    <h6 class="text-white mb-3">Recibe Ofertas Exclusivas</h6>
                    <form class="d-flex">
                        <input type="email" class="form-control newsletter-input" placeholder="Tu email...">
                        <button type="button" class="btn btn-alma-primary" style="border-radius: 0 5px 5px 0;">Suscribirse</button>
                    </form>
                </div>

                <!-- Columna 2: Productos -->
                <div class="col-lg-2 offset-lg-1 col-6">
                    <h5>Productos</h5>
                    <ul>
                        <li><a href="#">Rostro</a></li>
                        <li><a href="#">Cuerpo</a></li>
                        <li><a href="#">Kits de Regalo</a></li>
                        <li><a href="#">Nuevos Lanzamientos</a></li>
                    </ul>
                </div>

                <!-- Columna 3: Ayuda -->
                <div class="col-lg-2 col-6">
                    <h5>Ayuda</h5>
                    <ul>
                        <li><a href="#">Preguntas Frecuentes</a></li>
                        <li><a href="#">Envíos y Despacho</a></li>
                        <li><a href="#">Devoluciones</a></li>
                        <li><a href="#">Contacto</a></li>
                    </ul>
                </div>

                <!-- Columna 4: Contacto -->
                <div class="col-lg-3">
                    <h5>Contacto</h5>
                    <ul class="text-white-50 small">
                        <li><i class="fas fa-envelope me-2"></i> contacto@alma.cl</li>
                        <li><i class="fas fa-phone me-2"></i> +56 2 1234 5678</li>
                        <li><i class="fas fa-clock me-2"></i> Lun-Vie 9:00-18:00</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i> Santiago, Chile</li>
                    </ul>
                </div>
            </div>
            
            <hr class="border-secondary my-4">
            
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="small text-white-50">&copy; 2025 Alma. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <a href="#" class="small me-3">Términos y Condiciones</a>
                    <a href="#" class="small">Política de Privacidad</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- 7. BOTÓN DE AYUDA FLOTANTE -->
    <div class="fab-container">
        <div class="fab-options" id="fab-options">
            <a href="#" class="fab-item" title="WhatsApp"><i class="fab fa-whatsapp text-success"></i></a>
            <a href="#" class="fab-item" title="Teléfono"><i class="fas fa-phone text-primary"></i></a>
            <a href="#" class="fab-item" title="Email"><i class="fas fa-envelope text-danger"></i></a>
        </div>
        <div class="fab-main" id="fab-main">
            <i class="fas fa-comment-dots"></i>
        </div>
    </div>

    <!-- 8. OFFCANVAS CARRITO DE COMPRAS -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" aria-labelledby="cartOffcanvasLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="cartOffcanvasLabel"><i class="fas fa-shopping-bag me-2"></i>Tu Carrito</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <!-- Contenedor dinámico de items -->
            <div id="cart-items-container">
                <div class="text-center py-5 text-muted">
                    <i class="fas fa-leaf fa-3x mb-3" style="opacity: 0.3;"></i>
                    <p>Tu carrito está vacío</p>
                    <button class="btn btn-sm btn-alma-outline mt-2" data-bs-dismiss="offcanvas">Seguir Comprando</button>
                </div>
            </div>
        </div>
        <div class="offcanvas-footer p-3 border-top bg-light">
            <div class="d-flex justify-content-between mb-3 align-items-end">
                <span class="text-muted">Total:</span>
                <strong class="fs-4 text-terracota" id="cart-total">$0</strong>
            </div>
            <button class="btn btn-alma-primary w-100 py-2">Finalizar Compra</button>
        </div>
    </div>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript Vanilla para funcionalidad -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. LÓGICA DE BÚSQUEDA ---
            const searchBtn = document.getElementById('search-btn');
            const closeSearchBtn = document.getElementById('close-search-btn');
            const searchOverlay = document.getElementById('search-overlay');
            const searchInput = document.getElementById('search-input');
            const productCols = document.querySelectorAll('.product-col');
            const noResultsMsg = document.getElementById('no-results');
            const clearSearchBtn = document.getElementById('clear-search');
            const productsSection = document.getElementById('productos');

            // Abrir buscador
            searchBtn.addEventListener('click', () => {
                searchOverlay.classList.add('open');
                setTimeout(() => searchInput.focus(), 300); // Focus con pequeño delay
            });

            // Cerrar buscador
            function closeSearch() {
                searchOverlay.classList.remove('open');
                searchInput.value = ''; // Opcional: limpiar al cerrar o dejarlo
            }
            closeSearchBtn.addEventListener('click', closeSearch);

            // Cerrar con ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && searchOverlay.classList.contains('open')) {
                    closeSearch();
                }
            });

            // Filtrado en tiempo real
            searchInput.addEventListener('input', (e) => {
                const term = e.target.value.toLowerCase().trim();
                let visibleCount = 0;
                let shouldScroll = false;

                // Si hay término y estamos lejos de la sección de productos, hacer scroll suave
                if (term.length > 0) {
                     // Solo hacer scroll si no estamos ya viendo la sección
                    const rect = productsSection.getBoundingClientRect();
                    if (rect.top > window.innerHeight || rect.bottom < 0) {
                        productsSection.scrollIntoView({ behavior: 'smooth' });
                    }
                }

                productCols.forEach(col => {
                    const title = col.dataset.title; // Usamos el atributo data-title que añadimos al HTML
                    if (title.includes(term)) {
                        col.classList.remove('product-hidden');
                        visibleCount++;
                    } else {
                        col.classList.add('product-hidden');
                    }
                });

                // Mostrar mensaje de "no resultados"
                if (visibleCount === 0 && term !== '') {
                    noResultsMsg.classList.remove('d-none');
                } else {
                    noResultsMsg.classList.add('d-none');
                }
            });
            
            // Botón "Ver todos" en mensaje de error
            clearSearchBtn.addEventListener('click', () => {
                searchInput.value = '';
                productCols.forEach(col => col.classList.remove('product-hidden'));
                noResultsMsg.classList.add('d-none');
                searchInput.focus(); // Volver al input
            });


            // --- 2. LÓGICA SCROLL SPY (NAVEGACIÓN ACTIVA) ---
            const sections = document.querySelectorAll("header, section");
            const navLinks = document.querySelectorAll(".nav-link");

            function activateLink() {
                let current = "";
                sections.forEach((section) => {
                    const sectionTop = section.offsetTop;
                    if (window.scrollY >= (sectionTop - 150)) {
                        current = section.getAttribute("id");
                    }
                });

                navLinks.forEach((link) => {
                    link.classList.remove("active");
                    if (link.getAttribute("href").includes(current)) {
                        link.classList.add("active");
                    }
                });
            }
            window.addEventListener("scroll", activateLink);
            activateLink(); 

            // --- 3. LÓGICA BOTÓN FLOTANTE ---
            const fabMain = document.getElementById('fab-main');
            const fabOptions = document.getElementById('fab-options');
            const fabIcon = fabMain.querySelector('i');

            fabMain.addEventListener('click', () => {
                fabOptions.classList.toggle('active');
                if (fabOptions.classList.contains('active')) {
                    fabIcon.classList.remove('fa-comment-dots');
                    fabIcon.classList.add('fa-times');
                } else {
                    fabIcon.classList.remove('fa-times');
                    fabIcon.classList.add('fa-comment-dots');
                }
            });

            // --- 4. LÓGICA CARRITO DE COMPRAS ---
            let cart = []; 
            const cartButtons = document.querySelectorAll('.add-to-cart');
            const cartCounter = document.getElementById('cart-counter');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const cartTotalElement = document.getElementById('cart-total');
            const formatter = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' });

            function addToCart(product) {
                const existingItem = cart.find(item => item.id === product.id);
                if (existingItem) {
                    existingItem.qty++;
                } else {
                    cart.push({ ...product, qty: 1 });
                }
                updateCartUI();
                showAddedFeedback();
            }

            window.removeFromCart = function(id) {
                cart = cart.filter(item => item.id !== id);
                updateCartUI();
            };

            window.changeQty = function(id, change) {
                const item = cart.find(item => item.id === id);
                if (item) {
                    item.qty += change;
                    if (item.qty <= 0) {
                        removeFromCart(id);
                    } else {
                        updateCartUI();
                    }
                }
            };

            function updateCartUI() {
                const totalItems = cart.reduce((acc, item) => acc + item.qty, 0);
                cartCounter.textContent = totalItems;
                cartCounter.style.transform = 'translate(-50%, -50%) scale(1.2)';
                setTimeout(() => cartCounter.style.transform = 'translate(-50%, -50%) scale(1)', 200);

                const totalPrice = cart.reduce((acc, item) => acc + (item.price * item.qty), 0);
                cartTotalElement.textContent = formatter.format(totalPrice);

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = `
                        <div class="text-center py-5 text-muted">
                            <i class="fas fa-leaf fa-3x mb-3" style="opacity: 0.3;"></i>
                            <p>Tu carrito está vacío</p>
                            <button class="btn btn-sm btn-alma-outline mt-2" data-bs-dismiss="offcanvas">Seguir Comprando</button>
                        </div>
                    `;
                } else {
                    cartItemsContainer.innerHTML = cart.map(item => `
                        <div class="cart-item">
                            <img src="${item.img}" alt="${item.name}" class="cart-item-img">
                            <div class="cart-item-details">
                                <h6 class="cart-item-title">${item.name}</h6>
                                <span class="cart-item-price">${formatter.format(item.price)}</span>
                                <div class="cart-item-actions mt-2">
                                    <div class="btn-group btn-group-sm">
                                        <button class="btn-qty" onclick="changeQty('${item.id}', -1)">-</button>
                                        <span class="px-2 border-top border-bottom d-flex align-items-center">${item.qty}</span>
                                        <button class="btn-qty" onclick="changeQty('${item.id}', 1)">+</button>
                                    </div>
                                    <button class="btn-remove ms-auto" onclick="removeFromCart('${item.id}')" title="Eliminar">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }

            function showAddedFeedback() {
                const offcanvasElement = document.getElementById('cartOffcanvas');
                const bsOffcanvas = bootstrap.Offcanvas.getOrCreateInstance(offcanvasElement);
                bsOffcanvas.show();
            }

            cartButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    const product = {
                        id: this.dataset.id,
                        name: this.dataset.name,
                        price: parseInt(this.dataset.price),
                        img: this.dataset.img
                    };
                    addToCart(product);
                    
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i>';
                    this.classList.add('btn-success');
                    this.classList.remove('btn-alma-primary');
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.classList.remove('btn-success');
                        this.classList.add('btn-alma-primary');
                    }, 1500);
                });
            });

        });
    </script>
</body>
</html>